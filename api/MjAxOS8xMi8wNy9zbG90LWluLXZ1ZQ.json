{"title":"Vue中的插槽","date":"2019-12-07T11:48:12.888Z","thumbnail":"https://s2.ax1x.com/2019/12/07/QNY0UA.md.jpg","link":"2019/12/07/slot-in-vue","updated":"2019-12-07T12:42:37.658Z","content":"<p>插槽的作用主要是进行内容的分发，将组件开始标签和结束标签之间的内容分发到子组件的<code>&lt;slot&gt;</code>元素中。</p>\n<h2 id=\"后备内容\">后备内容<a href=\"2019/12/07/slot-in-vue#后备内容\"></a></h2><p>slot作为出口，可以设置默认值作为后备内容。如：</p>\n<figure class=\"highlight html\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 一个默认样式为提交的组件 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">submit-button</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">submit-button</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- submitButton组件 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">slot</span>&gt;</span>Submit<span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"具名插槽\">具名插槽<a href=\"2019/12/07/slot-in-vue#具名插槽\"></a></h2><p>如果需要多个插槽，就得使用具名插槽。</p>\n<p>在父组件使用template标签包裹需要分发的内容，然后在标签上使用v-slot指令（<strong>只能在template上使用</strong>），以其参数的形式指定分发的插槽。<code>v-slot:</code>的缩写为’<code>#</code>。</p>\n<figure class=\"highlight html\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 父组件 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">base-layout</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-slot:header</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>我是标题<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>我是正文<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-slot:footer</span>&gt;</span></span><br><span class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>我是页脚<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">base-layout</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<p>而在子组件中需要在slot标签上以name属性命名。如果未命名，默认name为default，没被v-slot包裹的内容都会分发到这。</p>\n<figure class=\"highlight html\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- base-layout --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"container\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">slot</span> <span class=\"attr\">name</span>=<span class=\"string\">\"header\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">slot</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">slot</span> <span class=\"attr\">name</span>=<span class=\"string\">\"footer\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"作用域插槽\">作用域插槽<a href=\"2019/12/07/slot-in-vue#作用域插槽\"></a></h2><p>作用域插槽的作用在于让父组件能够获取到子组件中的数据。</p>\n<p>首先为了让父组件能够访问子组件中的数据，子组件要先把数据作为slot的一个特性绑定上去。这个特性被称为<strong>插槽prop</strong></p>\n<figure class=\"highlight html\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">slot</span> <span class=\"attr\">v-bind:user</span>=<span class=\"string\">\"user\"</span>&gt;</span></span><br><span class=\"line\">  \t&#123;&#123;user.lastName&#125;&#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<p>在父组件中先使用v-slot给提供的插槽prop命名，然后通过这个命名的对象就能访问到子组件的数据了。</p>\n<figure class=\"highlight html\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">current-user</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-slot:default</span>=<span class=\"string\">\"slotProps\"</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123;slotProps.user.firstName&#125;&#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">current</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<p>因为插槽prop的本质是对象，所以可以使用ES6的解构赋值去解构插槽prop。</p>\n<figure class=\"highlight html\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">current-user</span> <span class=\"attr\">v-slot</span>=<span class=\"string\">\"&#123;user&#125;\"</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123;user.firstName&#125;&#125; </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">current</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 或者使用解构对传递的prop进行重命名--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">current-user</span> <span class=\"attr\">v-slot</span>=<span class=\"string\">\"&#123;user:person&#125;\"</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123;person.firstName&#125;&#125; </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">current</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 或者定义默认值，应对子组件传递值为undefined的情况--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">current-user</span> <span class=\"attr\">v-slot</span>=<span class=\"string\">\"&#123;user:&#123; firstName: 'Unkown' &#125; &#125;\"</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123;user.firstName&#125;&#125; </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">current</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<p>作用：使用子组件中的数据，通过分发新的template改变子组件的局部逻辑。</p>\n<h2 id=\"动态插槽名\">动态插槽名<a href=\"2019/12/07/slot-in-vue#动态插槽名\"></a></h2><figure class=\"highlight html\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">base-layout</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> #[<span class=\"attr\">dynamicSlotName</span>]&gt;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">base-layout</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n","prev":{"title":"怎么去封装一个类","link":"2019/12/21/how-to-write-a-class"},"next":{"title":"What is in ES6","link":"2019/11/27/what-is-in-es6"},"plink":"http://yoursite.com/2019/12/07/slot-in-vue/","toc":[{"title":"后备内容","id":"后备内容","index":"1"},{"title":"具名插槽","id":"具名插槽","index":"2"},{"title":"作用域插槽","id":"作用域插槽","index":"3"},{"title":"动态插槽名","id":"动态插槽名","index":"4"}]}